(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{62:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c(29),r=c.n(n),s=c(12),l=c(2),i=c(0),o=function(){return Object(i.jsx)("div",{children:Object(i.jsx)("h1",{className:"font-weight-light display-1 text-center",children:"Place Finder"})})},j=c(3),u=c.n(j),b=c(7),d=c(5),h=c(30),x=c.n(h).a.create({baseURL:"/api/places"}),O=c(32),p=Object(a.createContext)(),m=function(e){var t=Object(a.useState)([]),c=Object(d.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(null),l=Object(d.a)(s,2),o=l[0],j=l[1];return Object(i.jsx)(p.Provider,{value:{places:n,setPlaces:r,addPlace:function(e){r([].concat(Object(O.a)(n),[e]))},selectedPlace:o,setSelectedPlace:j},children:e.children})},v=function(){var e=Object(a.useContext)(p).addPlace,t=Object(a.useState)(""),c=Object(d.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(""),l=Object(d.a)(s,2),o=l[0],j=l[1],h=Object(a.useState)(""),O=Object(d.a)(h,2),m=O[0],v=O[1],f=function(){var t=Object(b.a)(u.a.mark((function t(c){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.prev=1,t.next=4,x.post("/",{name:n,location:o,price_level:m});case 4:a=t.sent,e(a.data.data.place),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(i.jsx)("div",{className:"mb-4",children:Object(i.jsx)("form",{action:"",children:Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col",children:Object(i.jsx)("input",{value:n,onChange:function(e){return r(e.target.value)},className:"form-control",type:"text",placeholder:"name"})}),Object(i.jsx)("div",{className:"col",children:Object(i.jsx)("input",{value:o,onChange:function(e){return j(e.target.value)},className:"form-control",type:"text",placeholder:"location"})}),Object(i.jsx)("div",{className:"col",children:Object(i.jsxs)("select",{value:m,onChange:function(e){return v(e.target.value)},className:"form-select mr-sm-2",children:[Object(i.jsx)("option",{value:"",disabled:!0,children:"Price Level"}),Object(i.jsx)("option",{value:"1",children:"$"}),Object(i.jsx)("option",{value:"2",children:"$$"}),Object(i.jsx)("option",{value:"3",children:"$$$"}),Object(i.jsx)("option",{value:"4",children:"$$$$"}),Object(i.jsx)("option",{value:"5",children:"$$$$$"})]})}),Object(i.jsx)("div",{className:"col-auto",children:Object(i.jsx)("button",{onClick:f,type:"submit",className:"btn btn-primary",children:"Add"})})]})})})},f=function(e){for(var t=e.rating,c=[],a=1;a<=5;a++)a<=t?c.push(Object(i.jsx)("i",{className:"fas fa-star text-warning"},a)):a<=Math.round(t)?c.push(Object(i.jsx)("i",{className:"fas fa-star-half-alt text-warning"},a)):c.push(Object(i.jsx)("i",{className:"far fa-star text-warning"},a));return Object(i.jsx)(i.Fragment,{children:c})},g=function(e){var t=Object(a.useContext)(p),c=t.places,n=t.setPlaces,r=Object(l.f)();Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get("/");case 3:t=e.sent,n(t.data.data.places),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var s=function(){var e=Object(b.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.prev=1,e.next=4,x.delete("/".concat(a));case 4:n(c.filter((function(e){return e.id!==a}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,c){return e.apply(this,arguments)}}(),o=function(){var e=Object(b.a)(u.a.mark((function e(t,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),r.push("places/".concat(c,"/update"));case 2:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),j=function(e){return e.count?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(f,{rating:e.average_rating}),Object(i.jsxs)("span",{className:"text-warning ms-1",children:["(",e.count,")"]})]}):Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("span",{className:"text-warning",children:"0 reviews"})})};return Object(i.jsx)("div",{className:"list-group",children:Object(i.jsxs)("table",{className:"table table-hover",children:[Object(i.jsx)("thead",{className:"bg-primary",children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"col",children:"Name"}),Object(i.jsx)("th",{scope:"col",children:"Location"}),Object(i.jsx)("th",{scope:"col",children:"Price"}),Object(i.jsx)("th",{scope:"col",children:"Rating"}),Object(i.jsx)("th",{scope:"col",children:"Edit"}),Object(i.jsx)("th",{scope:"col",children:"Delete"})]})}),Object(i.jsx)("tbody",{className:"table-dark",children:c&&c.map((function(e){return Object(i.jsxs)("tr",{onClick:function(){return t=e.id,void r.push("/places/".concat(t));var t},children:[Object(i.jsx)("td",{children:e.name}),Object(i.jsx)("td",{children:e.location}),Object(i.jsx)("td",{children:"$".repeat(e.price_level)}),Object(i.jsx)("td",{children:j(e)}),Object(i.jsx)("td",{children:Object(i.jsx)("div",{onClick:function(t){return o(t,e.id)},className:"btn btn-sm btn-warning",children:"Edit"})}),Object(i.jsx)("td",{children:Object(i.jsx)("div",{onClick:function(t){return s(t,e.id)},className:"btn btn-sm btn-danger",children:"Delete"})})]},e.id)}))})]})})},N=function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(o,{}),Object(i.jsx)(v,{}),Object(i.jsx)(g,{})]})},w=function(e){return e.reviews.map((function(e){return Object(i.jsx)("div",{className:"col col-sm-6 col-lg-4",children:Object(i.jsxs)("div",{className:"card text-white bg-primary mb-3 mx-auto",style:{maxWidth:"20rem"},children:[Object(i.jsxs)("div",{className:"card-header d-flex justify-content-between",children:[Object(i.jsx)("span",{children:e.name}),Object(i.jsx)("span",{children:Object(i.jsx)(f,{rating:e.rating})})]}),Object(i.jsx)("div",{className:"card-body",children:Object(i.jsx)("p",{className:"card-text",children:e.review})})]})},e.id)}))},$=function(){var e=Object(l.h)().id,t=Object(l.g)(),c=Object(l.f)(),n=Object(a.useState)(""),r=Object(d.a)(n,2),s=r[0],o=r[1],j=Object(a.useState)(""),h=Object(d.a)(j,2),O=h[0],p=h[1],m=Object(a.useState)(""),v=Object(d.a)(m,2),f=v[0],g=v[1],N=function(){var a=Object(b.a)(u.a.mark((function a(n){var r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,a.next=4,x.post("/".concat(e,"/add-review"),{name:s,rating:O,review:f});case 4:r=a.sent,console.log(r),c.push("/"),c.push(t.pathname),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}();return Object(i.jsx)("div",{className:"col mb-3",children:Object(i.jsxs)("form",{children:[Object(i.jsxs)("div",{className:"row mb-3",children:[Object(i.jsxs)("div",{className:"col-8",children:[Object(i.jsx)("label",{className:"form-label",htmlFor:"name",children:"Name"}),Object(i.jsx)("input",{value:s,onChange:function(e){return o(e.target.value)},type:"text",className:"form-control",id:"name",placeholder:"name"})]}),Object(i.jsxs)("div",{className:"col-4",children:[Object(i.jsx)("label",{className:"form-label",htmlFor:"rating",children:"Rating"}),Object(i.jsxs)("select",{value:O,onChange:function(e){return p(e.target.value)},className:"form-select",id:"rating",children:[Object(i.jsx)("option",{disabled:!0,children:"Rating"}),Object(i.jsx)("option",{value:"1",children:"1"}),Object(i.jsx)("option",{value:"2",children:"2"}),Object(i.jsx)("option",{value:"3",children:"3"}),Object(i.jsx)("option",{value:"4",children:"4"}),Object(i.jsx)("option",{value:"5",children:"5"})]})]})]}),Object(i.jsx)("div",{className:"row mb-3",children:Object(i.jsxs)("div",{className:"col",children:[Object(i.jsx)("label",{className:"form-label",htmlFor:"review"}),Object(i.jsx)("textarea",{value:f,onChange:function(e){return g(e.target.value)},className:"form-control",id:"review",rows:"5"})]})}),Object(i.jsx)("button",{onClick:N,type:"submit",className:"btn btn-primary",children:"Submit"})]})})},y=function(){var e=Object(l.h)().id,t=Object(a.useContext)(p),c=t.selectedPlace,n=t.setSelectedPlace;return Object(a.useEffect)((function(){try{(function(){var t=Object(b.a)(u.a.mark((function t(){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("/".concat(e));case 2:c=t.sent,n(c.data.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}catch(t){console.log(t)}})),Object(i.jsx)("div",{children:c&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{className:"text-center display-1",children:c.place.name}),Object(i.jsxs)("div",{className:"text-center",children:[Object(i.jsx)(f,{rating:c.place.average_rating}),Object(i.jsx)("div",{className:"span text-warning ms-1",children:c.place.count?"(".concat(c.place.count,")"):"(0)"})]}),Object(i.jsxs)("div",{className:"mt-3",children:[Object(i.jsx)("div",{className:"row mb-2",children:Object(i.jsx)(w,{reviews:c.reviews})}),Object(i.jsx)("div",{className:"row mb-2",children:Object(i.jsx)($,{})})]})]})})},k=function(e){var t=Object(l.h)().id,c=Object(l.f)(),n=Object(a.useState)(""),r=Object(d.a)(n,2),s=r[0],o=r[1],j=Object(a.useState)(""),h=Object(d.a)(j,2),O=h[0],p=h[1],m=Object(a.useState)(""),v=Object(d.a)(m,2),f=v[0],g=v[1];Object(a.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/".concat(t));case 2:c=e.sent,console.log(c),o(c.data.data.place.name),p(c.data.data.place.location),g(c.data.data.place.price_level);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var N=function(){var e=Object(b.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,x.put("/".concat(t),{name:s,location:O,price_level:f});case 3:c.push("/");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{children:[Object(i.jsxs)("div",{className:"mb-3",children:[Object(i.jsx)("label",{className:"form-label",htmlFor:"name",children:"Name"}),Object(i.jsx)("input",{value:s,onChange:function(e){return o(e.target.value)},type:"text",className:"form-control",id:"name"})]}),Object(i.jsxs)("div",{className:"mb-3",children:[Object(i.jsx)("label",{className:"form-label",htmlFor:"location",children:"Location"}),Object(i.jsx)("input",{value:O,onChange:function(e){return p(e.target.value)},type:"text",className:"form-control",id:"location"})]}),Object(i.jsxs)("div",{className:"mb-3",children:[Object(i.jsx)("label",{className:"form-label",htmlFor:"price_level",children:"Location"}),Object(i.jsxs)("select",{value:f,onChange:function(e){return g(e.target.value)},className:"form-select",id:"price_level",children:[Object(i.jsx)("option",{value:"",disabled:!0,children:"Price Level"}),Object(i.jsx)("option",{value:"1",children:"$"}),Object(i.jsx)("option",{value:"2",children:"$$"}),Object(i.jsx)("option",{value:"3",children:"$$$"}),Object(i.jsx)("option",{value:"4",children:"$$$$"}),Object(i.jsx)("option",{value:"5",children:"$$$$$"})]})]}),Object(i.jsx)("button",{onClick:N,type:"submit",className:"btn btn-primary",children:"Submit"})]})})},C=function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{className:"text-center display-1",children:"Update"}),Object(i.jsx)(k,{})]})},P=function(){return Object(i.jsx)(m,{children:Object(i.jsx)("div",{className:"container",children:Object(i.jsx)(s.a,{children:Object(i.jsxs)(l.c,{children:[Object(i.jsx)(l.a,{exact:!0,path:"/",component:N}),Object(i.jsx)(l.a,{exact:!0,path:"/places/:id",component:y}),Object(i.jsx)(l.a,{exact:!0,path:"/places/:id/update",component:C})]})})})})};r.a.render(Object(i.jsx)(P,{}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.3c0c437a.chunk.js.map